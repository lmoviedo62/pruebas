<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recursos de Ayuda - Serena</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f7ebff;
      font-family: system-ui, -apple-system, sans-serif;
    }

    .navbar-serena {
      background: linear-gradient(90deg, #8b5cf6, #a855f7);
      padding: 12px 0;
    }

    .navbar-brand {
      color: white !important;
      font-weight: 700;
    }

    .btn-back {
      background: rgba(255,255,255,0.2);
      border: 1px solid rgba(255,255,255,0.4);
      color: white;
      padding: 6px 16px;
      border-radius: 8px;
    }

    .container-main {
      max-width: 900px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .alert-emergency {
      background: linear-gradient(135deg, #dc2626, #ef4444);
      color: white;
      border: none;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 8px 20px rgba(220, 38, 38, 0.3);
    }

    .card-resource {
      background: white;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: transform 0.2s;
    }

    .card-resource:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }

    .resource-icon {
      font-size: 32px;
      margin-bottom: 12px;
    }

    .resource-title {
      font-size: 20px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 8px;
    }

    .resource-description {
      color: #6b7280;
      margin-bottom: 12px;
    }

    .resource-contact {
      background: #f3f4f6;
      padding: 12px 16px;
      border-radius: 8px;
      font-family: monospace;
      color: #374151;
      font-weight: 600;
    }

    .email-form-card {
      background: white;
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      margin-top: 30px;
    }

    .form-label {
      font-weight: 600;
      color: #374151;
    }

    .form-control, .form-select {
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      padding: 12px;
    }

    .form-control:focus, .form-select:focus {
      border-color: #dc2626;
      box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
    }

    .btn-send-help {
      background: linear-gradient(135deg, #dc2626, #ef4444);
      border: none;
      padding: 14px 32px;
      border-radius: 12px;
      font-weight: 600;
      color: white;
      font-size: 16px;
    }

    .btn-send-help:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(220, 38, 38, 0.3);
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-serena">
    <div class="container">
      <a href="/panel" class="navbar-brand">Serena</a>
      <button class="btn-back" onclick="window.location.href='/panel'">â† Volver al panel</button>
    </div>
  </nav>

  <div class="container-main">
    <!-- Alerta de emergencia -->
    <div class="alert-emergency">
      <h2 style="margin-bottom: 16px;">ğŸ†˜ Â¿Necesitas ayuda inmediata?</h2>
      <p style="font-size: 15px; margin-bottom: 0;">
        Si estÃ¡s en una situaciÃ³n de emergencia o crisis, por favor comunÃ­cate inmediatamente 
        con los servicios de emergencia o con Bienestar Universitario. Tu seguridad es lo mÃ¡s importante.
      </p>
    </div>

    <h3 style="color: #1f2937; margin-bottom: 24px;">ğŸ“ LÃ­neas de ayuda disponibles</h3>

    <!-- Recursos -->
    <div class="card-resource">
      <div class="resource-icon">ğŸš¨</div>
      <div class="resource-title">LÃ­nea Nacional de Emergencias</div>
      <div class="resource-description">
        Para emergencias mÃ©dicas, policiales o cualquier situaciÃ³n que requiera atenciÃ³n inmediata.
      </div>
      <div class="resource-contact">ğŸ“ 123</div>
    </div>

    <div class="card-resource">
      <div class="resource-icon">ğŸ’œ</div>
      <div class="resource-title">Bienestar Universitario</div>
      <div class="resource-description">
        AtenciÃ³n psicolÃ³gica, orientaciÃ³n y apoyo emocional para estudiantes de la Universidad CatÃ³lica.
      </div>
      <div class="resource-contact">ğŸ“§ bienestar@ucatolica.edu.co</div>
    </div>

    <div class="card-resource">
      <div class="resource-icon">ğŸ“±</div>
      <div class="resource-title">LÃ­nea 106 - LÃ­nea de la vida</div>
      <div class="resource-description">
        LÃ­nea gratuita de orientaciÃ³n psicolÃ³gica y prevenciÃ³n del suicidio disponible 24/7.
      </div>
      <div class="resource-contact">ğŸ“ (601) 106</div>
    </div>

    <div class="card-resource">
      <div class="resource-icon">ğŸ¥</div>
      <div class="resource-title">LÃ­nea 155 - OrientaciÃ³n en Salud Mental</div>
      <div class="resource-description">
        OrientaciÃ³n en salud mental, atenciÃ³n psicosocial y referencia a servicios de salud.
      </div>
      <div class="resource-contact">ğŸ“ 155</div>
    </div>

    <div class="card-resource">
      <div class="resource-icon">ğŸ‘¥</div>
      <div class="resource-title">LÃ­nea 141 - ICBF</div>
      <div class="resource-description">
        ProtecciÃ³n de niÃ±os, niÃ±as y adolescentes. Denuncia de maltrato o abuso.
      </div>
      <div class="resource-contact">ğŸ“ 141</div>
    </div>

    <!-- Formulario de contacto -->
    <div class="email-form-card">
      <h3 style="color: #dc2626; margin-bottom: 8px;">ğŸ“§ Solicitar ayuda a Bienestar Universitario</h3>
      <p style="color: #6b7280; font-size: 14px; margin-bottom: 24px;">
        Completa este formulario si necesitas atenciÃ³n urgente de Bienestar Universitario. 
        Tu informaciÃ³n serÃ¡ tratada con confidencialidad.
      </p>

      <form id="helpForm">
        <div class="mb-3">
          <label class="form-label">Tipo de ayuda que necesitas</label>
          <select class="form-select" id="helpType" required>
            <option value="">Selecciona...</option>
            <option value="urgente">ğŸš¨ Urgente - Necesito ayuda inmediata</option>
            <option value="psicologica">ğŸ’­ AtenciÃ³n psicolÃ³gica</option>
            <option value="academica">ğŸ“š OrientaciÃ³n acadÃ©mica</option>
            <option value="economica">ğŸ’° Apoyo econÃ³mico</option>
            <option value="otra">ğŸ’¬ Otra situaciÃ³n</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Describe brevemente tu situaciÃ³n</label>
          <textarea 
            class="form-control" 
            id="helpMessage" 
            rows="5" 
            required
            placeholder="CuÃ©ntanos quÃ© estÃ¡ pasando y cÃ³mo podemos ayudarte..."
          ></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">Â¿CuÃ¡ndo te gustarÃ­a ser contactado?</label>
          <select class="form-select" id="contactTime" required>
            <option value="">Selecciona...</option>
            <option value="inmediato">Lo antes posible</option>
            <option value="hoy">Hoy</option>
            <option value="manana">MaÃ±ana</option>
            <option value="semana">Esta semana</option>
          </select>
        </div>

        <div class="alert alert-warning" style="font-size: 13px;">
          âš ï¸ <strong>Importante:</strong> Este formulario es una simulaciÃ³n para fines demostrativos. 
          En un entorno real, se enviarÃ­a un correo a Bienestar Universitario con tu informaciÃ³n.
        </div>

        <button type="submit" class="btn btn-send-help w-100">
          ğŸ“¨ Enviar solicitud de ayuda
        </button>
      </form>

      <div id="successMessage" style="display: none; margin-top: 20px;" class="alert alert-success">
        âœ… <strong>Solicitud enviada</strong><br>
        Hemos recibido tu solicitud. El equipo de Bienestar Universitario se pondrÃ¡ en contacto contigo pronto.
      </div>
    </div>
  </div>

  <script>
    document.getElementById('helpForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const helpType = document.getElementById('helpType').value;
      const message = document.getElementById('helpMessage').value;
      const contactTime = document.getElementById('contactTime').value;
      const userEmail = localStorage.getItem('user_email');

      if (!userEmail) {
        alert('No se detectÃ³ tu correo. Por favor inicia sesiÃ³n nuevamente.');
        window.location.href = '/login';
        return;
      }

      const submitBtn = this.querySelector('button[type="submit"]');
      submitBtn.disabled = true;
      submitBtn.textContent = 'â³ Enviando...';

      try {
        // AquÃ­ irÃ­a la llamada real al backend
        // await fetch('/api/v1/sos/send-help-request', { ... })
        
        // SimulaciÃ³n
        await new Promise(resolve => setTimeout(resolve, 1500));

        this.style.display = 'none';
        document.getElementById('successMessage').style.display = 'block';

        // Log para desarrollo
        console.log({
          tipo: helpType,
          mensaje: message,
          contacto: contactTime,
          email: userEmail
        });

      } catch (error) {
        alert('OcurriÃ³ un error al enviar tu solicitud. Por favor intenta nuevamente o contacta directamente a bienestar@ucatolica.edu.co');
        submitBtn.disabled = false;
        submitBtn.textContent = 'ğŸ“¨ Enviar solicitud de ayuda';
      }
    });
  </script>
</body>
</html>