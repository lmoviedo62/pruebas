{% extends "base.html" %}
{% block title %}Panel{% endblock %}

{% block extra_head %}
<style>
.text-serena {
    color: #7b2ff7;
}

.btn-serena {
    background-color: #7b2ff7;
    border-color: #7b2ff7;
    color: #fff;
}

.btn-serena:hover {
    background-color: #5f22bd;
    border-color: #5f22bd;
    color: #fff;
}

.btn-outline-serena {
    color: #7b2ff7;
    border-color: #7b2ff7;
}

.btn-outline-serena:hover {
    background-color: #7b2ff7;
    color: #fff;
}
</style>
{% endblock %}

{% block content %}
<div class="row g-4">
    <div class="col-md-4">
        <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
                <h5 class="card-title">Chat de apoyo</h5>
                <p class="card-text">
                    Inicia una conversaci√≥n con Serena para recibir apoyo emocional b√°sico y ejercicios de respiraci√≥n.
                </p>
                <a href="/chat" class="btn btn-serena">Ir al chat</a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
                <h5 class="card-title">Diario emocional</h5>
                <p class="card-text">
                    Registra tus emociones, pensamientos y experiencias diarias en un espacio seguro y privado.
                </p>
                <a href="/diario" class="btn btn-outline-serena">Ver mi diario</a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
                <h5 class="card-title">Recursos de ayuda</h5>
                <p class="card-text">
                    Informaci√≥n de l√≠neas de ayuda y contactos de Bienestar Universitario.
                </p>
                <a href="/sos" class="btn btn-outline-danger">Ver recursos</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// ‚úÖ VERIFICACI√ìN MEJORADA DE AUTENTICACI√ìN
(function() {
    console.log("üîç Verificando autenticaci√≥n...");
    
    const token = localStorage.getItem('token');
    const userEmail = localStorage.getItem('user_email');
    
    console.log("Token encontrado:", token ? "‚úÖ S√ç" : "‚ùå NO");
    console.log("Email encontrado:", userEmail ? "‚úÖ S√ç" : "‚ùå NO");
    
    // Si no hay token, redirigir al login
    if (!token || !userEmail) {
        console.log("‚ö†Ô∏è No hay autenticaci√≥n, redirigiendo a login...");
        setTimeout(() => {
            window.location.replace('/login');
        }, 100);
        return;
    }
    
    console.log("‚úÖ Usuario autenticado correctamente");
    console.log("üìß Email del usuario:", userEmail);
})();
</script>
{% endblock %}