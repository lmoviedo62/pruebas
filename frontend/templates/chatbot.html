<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat de apoyo - Serena</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e8edf4 100%);
      min-height: 100vh;
    }

    /* Navbar superior */
    .navbar {
      background: linear-gradient(90deg, #8b5cf6, #a855f7);
      padding: 16px 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .navbar-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .navbar-brand {
      color: white;
      font-size: 22px;
      font-weight: 700;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .navbar-links {
      display: flex;
      gap: 24px;
      align-items: center;
    }

    .navbar-links a {
      color: white;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      transition: opacity 0.2s;
      padding: 8px 16px;
      border-radius: 8px;
    }

    .navbar-links a:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    /* Contenedor principal */
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 32px 20px;
    }

    /* Intro card */
    .intro-card {
      background: white;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      border-left: 5px solid #8b5cf6;
    }

    .intro-card h2 {
      color: #1f2937;
      font-size: 20px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .intro-card p {
      color: #6b7280;
      line-height: 1.6;
      font-size: 14px;
    }

    .intro-card .disclaimer {
      background: #fef3c7;
      border-left: 3px solid #f59e0b;
      padding: 12px;
      margin-top: 12px;
      border-radius: 8px;
      font-size: 13px;
      color: #92400e;
    }

    /* Card del chat */
    .chat-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      padding: 24px;
      display: flex;
      flex-direction: column;
      height: calc(100vh - 400px);
      min-height: 500px;
    }

    .chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 2px solid #f3f4f6;
    }

    .chat-title {
      font-size: 20px;
      color: #8b5cf6;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .status-indicator {
      width: 10px;
      height: 10px;
      background: #10b981;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Botones de emociones */
    .emotion-section {
      margin-bottom: 20px;
    }

    .emotion-label {
      font-size: 14px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 12px;
      display: block;
    }

    .emotion-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .emotion-btn {
      padding: 10px 18px;
      border-radius: 20px;
      border: 2px solid;
      background: white;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .emotion-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .emotion-btn.muy-mal {
      color: #dc2626;
      border-color: #dc2626;
    }

    .emotion-btn.muy-mal:hover {
      background: #fee2e2;
    }

    .emotion-btn.triste {
      color: #f59e0b;
      border-color: #f59e0b;
    }

    .emotion-btn.triste:hover {
      background: #fef3c7;
    }

    .emotion-btn.neutral {
      color: #6b7280;
      border-color: #6b7280;
    }

    .emotion-btn.neutral:hover {
      background: #f3f4f6;
    }

    .emotion-btn.bien {
      color: #10b981;
      border-color: #10b981;
    }

    .emotion-btn.bien:hover {
      background: #d1fae5;
    }

    .emotion-btn.muy-bien {
      color: #3b82f6;
      border-color: #3b82f6;
    }

    .emotion-btn.muy-bien:hover {
      background: #dbeafe;
    }

    /* √Årea de chat */
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: #f9fafb;
      border-radius: 12px;
      margin-bottom: 20px;
      border: 1px solid #e5e7eb;
    }

    .message {
      margin-bottom: 16px;
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message.serena {
      text-align: left;
    }

    .message.user {
      text-align: right;
    }

    .message-content {
      display: inline-block;
      max-width: 80%;
      padding: 12px 16px;
      border-radius: 12px;
      line-height: 1.6;
      font-size: 14px;
      white-space: pre-wrap;
    }

    .message.serena .message-content {
      background: white;
      color: #374151;
      border: 1px solid #e5e7eb;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .message.user .message-content {
      background: #8b5cf6;
      color: white;
    }

    .message-sender {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 4px;
      font-weight: 600;
    }

    /* Input de mensaje */
    .input-area {
      display: flex;
      gap: 12px;
      align-items: flex-end;
    }

    .chat-input {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      font-size: 14px;
      font-family: inherit;
      transition: border-color 0.2s;
      resize: none;
      min-height: 48px;
      max-height: 120px;
    }

    .chat-input:focus {
      outline: none;
      border-color: #8b5cf6;
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
    }

    .chat-input::placeholder {
      color: #9ca3af;
    }

    /* Bot√≥n enviar */
    .btn-send {
      padding: 12px 24px;
      background: linear-gradient(135deg, #8b5cf6, #a855f7);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .btn-send:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
    }

    .btn-send:active {
      transform: translateY(0);
    }

    .btn-send:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Typing indicator */
    .typing-indicator {
      display: none;
      padding: 12px;
      margin-bottom: 16px;
    }

    .typing-indicator.active {
      display: block;
    }

    .typing-dots {
      display: inline-flex;
      gap: 4px;
    }

    .typing-dots span {
      width: 8px;
      height: 8px;
      background: #8b5cf6;
      border-radius: 50%;
      animation: typing 1.4s infinite;
    }

    .typing-dots span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dots span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.7;
      }
      30% {
        transform: translateY(-10px);
        opacity: 1;
      }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .emotion-buttons {
        flex-direction: column;
      }

      .emotion-btn {
        width: 100%;
        justify-content: center;
      }

      .message-content {
        max-width: 90%;
      }

      .input-area {
        flex-direction: column;
      }

      .btn-send {
        width: 100%;
        justify-content: center;
      }

      .navbar-links {
        gap: 12px;
      }

      .navbar-links a {
        font-size: 13px;
        padding: 6px 12px;
      }
    }

    /* Scrollbar personalizado */
    .chat-messages::-webkit-scrollbar {
      width: 8px;
    }

    .chat-messages::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .chat-messages::-webkit-scrollbar-thumb {
      background: #8b5cf6;
      border-radius: 10px;
    }

    .chat-messages::-webkit-scrollbar-thumb:hover {
      background: #7c3aed;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-content">
      <a href="/" class="navbar-brand">
        <span>üíú</span>
        <span>Serena</span>
      </a>
      <div class="navbar-links">
        <a href="/panel">Panel</a>
        <a href="/chat">Chat</a>
        <a href="/sos">Ayuda</a>
      </div>
    </div>
  </nav>

  <!-- Contenido principal -->
  <div class="container">
    <!-- Intro card -->
    <div class="intro-card">
      <h2>
        <span>ü§ó</span>
        <span>Bienvenido/a al espacio de apoyo emocional</span>
      </h2>
      <p>
        Soy Serena, tu asistente de apoyo emocional. Estoy aqu√≠ para escucharte sin juzgarte, 
        validar tus emociones y ayudarte a explorar estrategias basadas en psicolog√≠a 
        cognitivo-conductual. Puedes compartir c√≥mo te sientes hoy seleccionando una emoci√≥n 
        o escribi√©ndome directamente.
      </p>
      <div class="disclaimer">
        <strong>‚ö†Ô∏è Importante:</strong> Soy una herramienta de apoyo inicial, no reemplazo 
        la atenci√≥n psicol√≥gica profesional. Si est√°s en crisis, contacta inmediatamente con 
        Bienestar Universitario o la L√≠nea 106 (24/7).
      </div>
    </div>

    <!-- Card del chat -->
    <div class="chat-card">
      <!-- Header -->
      <div class="chat-header">
        <div class="chat-title">
          <div class="status-indicator"></div>
          <span>Conversaci√≥n con Serena</span>
        </div>
      </div>

      <!-- Secci√≥n de emociones -->
      <div class="emotion-section">
        <label class="emotion-label">¬øC√≥mo te sientes en este momento?</label>
        <div class="emotion-buttons">
          <button class="emotion-btn muy-mal" data-emotion="muy_mal">
            <span>üò¢</span>
            <span>Muy mal</span>
          </button>
          <button class="emotion-btn triste" data-emotion="triste">
            <span>üòî</span>
            <span>Triste</span>
          </button>
          <button class="emotion-btn neutral" data-emotion="neutral">
            <span>üòê</span>
            <span>Neutral</span>
          </button>
          <button class="emotion-btn bien" data-emotion="bien">
            <span>üôÇ</span>
            <span>Bien</span>
          </button>
          <button class="emotion-btn muy-bien" data-emotion="muy_bien">
            <span>üòä</span>
            <span>Muy bien</span>
          </button>
        </div>
      </div>

      <!-- √Årea de mensajes -->
      <div class="chat-messages" id="chatMessages">
        <div class="message serena">
          <div class="message-sender">üíú Serena</div>
          <div class="message-content">
Hola, soy Serena. Estoy aqu√≠ para acompa√±arte y escucharte.

En este espacio seguro y confidencial, puedes expresar lo que sientes sin miedo a ser juzgado/a. Todas tus emociones son v√°lidas y tienen sentido.

¬øC√≥mo te sientes hoy? Puedes seleccionar una emoci√≥n arriba o escribirme directamente lo que necesites compartir.
          </div>
        </div>
      </div>

      <!-- Typing indicator -->
      <div class="typing-indicator" id="typingIndicator">
        <div class="message-sender">üíú Serena est√° escribiendo...</div>
        <div class="typing-dots">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>

      <!-- Input de mensaje -->
      <div class="input-area">
        <textarea 
          id="chatInput" 
          class="chat-input" 
          placeholder="Escribe aqu√≠ lo que sientes o necesitas compartir..."
          rows="1"
        ></textarea>
        <button id="chatSend" class="btn-send">
          <span>Enviar</span>
          <span>üì§</span>
        </button>
      </div>
    </div>
  </div>

  <script>
    const emotionButtons = document.querySelectorAll(".emotion-btn");
    const chatMessages = document.getElementById("chatMessages");
    const chatInput = document.getElementById("chatInput");
    const chatSend = document.getElementById("chatSend");
    const typingIndicator = document.getElementById("typingIndicator");

    // Mapeo de respuestas emp√°ticas (simulaci√≥n - en producci√≥n vendr√≠an del backend)
    const emotionResponses = {
      muy_mal: `Lamento mucho que te sientas as√≠ en este momento. Lo que est√°s experimentando es v√°lido y tiene sentido. Cuando nos sentimos muy mal, nuestro cuerpo y mente nos est√°n enviando una se√±al importante de que algo necesita atenci√≥n.

Quiero que sepas que no est√°s solo/a en esto. Muchas personas atraviesan momentos dif√≠ciles, y buscar apoyo es un acto de valent√≠a y autocuidado. Tu bienestar es importante y mereces sentirte mejor.

Antes de continuar, quiero preguntarte: ¬øTe sientes en peligro inmediato o has pensado en hacerte da√±o? Si es as√≠, es fundamental que contactes de inmediato con Bienestar Universitario (bienestar@ucatolica.edu.co) o la L√≠nea 106 (disponible 24/7).

¬øEn qu√© puedo ayudarte ahora? Puedo ofrecerte:
‚Ä¢ Un ejercicio de respiraci√≥n para calmar tu sistema nervioso
‚Ä¢ Espacio para hablar sobre lo que sientes
‚Ä¢ Informaci√≥n sobre recursos de ayuda profesional
‚Ä¢ Ayuda para identificar y trabajar con pensamientos que aumentan tu malestar`,

      triste: `Entiendo que est√°s pasando por un momento de tristeza. La tristeza es una emoci√≥n humana completamente natural y v√°lida; nos conecta con lo que valoramos y nos muestra qu√© es importante para nosotros.

A veces, cuando estamos tristes, nuestros pensamientos pueden volverse m√°s negativos de lo que la realidad merece. Es como si llev√°ramos puestos unos 'lentes oscuros' que filtran nuestra percepci√≥n. Parte de mi trabajo es ayudarte a reconocer estos patrones y encontrar una perspectiva m√°s equilibrada.

Recuerda: sentir tristeza no significa debilidad. Significa que eres humano/a y que tu experiencia emocional es rica y compleja. Estoy aqu√≠ para acompa√±arte.

¬øTe gustar√≠a:
‚Ä¢ Explorar de d√≥nde viene esta tristeza
‚Ä¢ Que te sugiera actividades para sentirte mejor
‚Ä¢ Practicar una meditaci√≥n de aceptaci√≥n
‚Ä¢ Trabajar en ver las cosas desde otra perspectiva`,

      neutral: `Gracias por compartir c√≥mo te sientes. Estar en un estado neutral tambi√©n es v√°lido y puede ser un buen momento para reflexionar y fortalecerte emocionalmente.

A veces, la neutralidad puede significar calma y estabilidad, otras veces puede ser se√±al de desconexi√≥n emocional o de estar 'en pausa'. Ambas son experiencias comunes y est√° bien sentirse as√≠.

Este puede ser un momento ideal para desarrollar herramientas de autocuidado, explorar tus patrones de pensamiento, o simplemente practicar habilidades que te preparen para cuando vengan momentos m√°s desafiantes.

¬øTe interesar√≠a:
‚Ä¢ Conocerte mejor emocionalmente
‚Ä¢ Aprender herramientas de afrontamiento
‚Ä¢ Practicar mindfulness
‚Ä¢ Establecer metas de bienestar personal`,

      bien: `¬°Me alegra mucho saber que te sientes bien! Es importante reconocer y celebrar estos momentos positivos. A veces, cuando las cosas van bien, tendemos a no prestarles atenci√≥n, pero son igual de valiosos que los momentos dif√≠ciles.

Sentirse bien no es casualidad: generalmente es el resultado de pensamientos m√°s equilibrados, acciones constructivas y un buen manejo de tus emociones. Es valioso que identifiques qu√© est√° funcionando para ti en este momento.

Este es un excelente momento para fortalecer tus recursos emocionales y desarrollar habilidades que puedas usar cuando enfrentes desaf√≠os futuros.

Podemos trabajar en:
‚Ä¢ Identificar qu√© factores contribuyen a tu bienestar
‚Ä¢ Practicar gratitud
‚Ä¢ Prepararte para futuros desaf√≠os
‚Ä¢ Reflexionar sobre tu progreso personal`,

      muy_bien: `¬°Qu√© maravilloso que te sientas muy bien en este momento! Tu estado emocional positivo es un reflejo de que muchas cosas est√°n funcionando correctamente en tu vida: tus pensamientos son m√°s equilibrados, tus acciones te est√°n acercando a tus valores, y tu bienestar est√° en un buen lugar.

Es fundamental que reconozcas este estado y valores lo que has hecho para llegar aqu√≠. Cada momento de bienestar es una evidencia de tu capacidad de cuidarte y de construir una vida significativa.

Este es el momento perfecto para consolidar tus fortalezas, agradecer tu esfuerzo, y prepararte emocionalmente para el futuro.

¬øTe gustar√≠a:
‚Ä¢ Celebrar y reconocer tus logros
‚Ä¢ Explorar qu√© factores contribuyen a tu bienestar
‚Ä¢ Pensar en c√≥mo ayudar a otros desde tu bienestar
‚Ä¢ Crear un plan para mantener este estado positivo`
    };

    // Funci√≥n para agregar mensaje
    function addMessage(text, sender) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${sender}`;
      
      const senderDiv = document.createElement('div');
      senderDiv.className = 'message-sender';
      senderDiv.textContent = sender === 'serena' ? 'üíú Serena' : 'üë§ T√∫';
      
      const contentDiv = document.createElement('div');
      contentDiv.className = 'message-content';
      contentDiv.textContent = text;
      
      messageDiv.appendChild(senderDiv);
      messageDiv.appendChild(contentDiv);
      chatMessages.appendChild(messageDiv);
      
      // Scroll al final
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Funci√≥n para mostrar typing indicator
    function showTyping() {
      typingIndicator.classList.add('active');
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function hideTyping() {
      typingIndicator.classList.remove('active');
    }

    // Simular respuesta de Serena con delay
    function respondAsSerena(text) {
      showTyping();
      
      setTimeout(() => {
        hideTyping();
        addMessage(text, 'serena');
      }, 1500 + Math.random() * 1000);
    }

    // Manejar clic en botones de emoci√≥n
    emotionButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const emotion = btn.dataset.emotion;
        const emotionText = btn.textContent.trim();
        
        addMessage(`Seleccion√©: ${emotionText}`, 'user');
        respondAsSerena(emotionResponses[emotion]);
      });
    });

    // Funci√≥n para enviar mensaje
    function sendMessage() {
      const text = chatInput.value.trim();
      if (!text) return;
      
      addMessage(text, 'user');
      chatInput.value = "";
      chatInput.style.height = 'auto';
      
      // Respuesta emp√°tica general
      const response = `Gracias por confiar en m√≠ y compartir lo que est√°s sintiendo. He le√≠do tus palabras con atenci√≥n y quiero que sepas que lo que experimentas es importante y merece ser escuchado.

En la terapia cognitivo-conductual, creemos que hay una relaci√≥n profunda entre lo que pensamos, lo que sentimos y c√≥mo actuamos. A veces, nuestros pensamientos autom√°ticos pueden intensificar nuestras emociones de maneras que no nos ayudan.

Algunas cosas para recordar:
‚úì Tus emociones son v√°lidas, sin importar cu√°les sean
‚úì No tienes que enfrentar esto solo/a - hay recursos disponibles
‚úì Peque√±os pasos cuentan: cada momento de autocuidado es valioso
‚úì Est√° bien no estar bien todo el tiempo

Si sientes que necesitas apoyo m√°s profundo, te animo a contactar con Bienestar Universitario (bienestar@ucatolica.edu.co).

¬øHay algo espec√≠fico en lo que te gustar√≠a que te ayudara hoy?`;
      
      respondAsSerena(response);
    }

    // Event listeners
    chatSend.addEventListener("click", sendMessage);
    
    chatInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });

    // Auto-resize textarea
    chatInput.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = Math.min(this.scrollHeight, 120) + 'px';
    });
  </script>
</body>
</html>